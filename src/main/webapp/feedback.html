<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style/styles.css">
    <meta charset="UTF-8">
    <title>Feedback</title>
</head>
<body>
<div class="meeting-owner-name">
    <p>Koosoleku koostaja: <span id="meeting_holder_by_name"></span></p>
</div>
<div class="meeting">
    <p>Meeting owner id:  <span id="meeting_holder_id"></span></p>
    <p>Koosoleku sisu:  <span id="meeting_subject"></span></p>
    <p>Koosoleku toimumisaeg: <span id="meeting_time"></span></p>
</div>

<div class="txt-center">
    <form>
        <input type="hidden" id="meeting_id_field"/>
        <ul class="rating">
            <input type="radio" id="str5" name="rating" value="5"/><label for="str5" title="Amazing">5 stars</label>
            <input type="radio" id="str4" name="rating" value="4"/><label for="str4" title="Good">4 stars</label>
            <input type="radio" id="str3" name="rating" value="3"/><label for="str3" title="Average">3 stars</label>
            <input type="radio" id="str2" name="rating" value="2"/><label for="str2" title="Not Good">2 stars</label>
            <input type="radio" id="str1" name="rating" value="1"/><label for="str1" title="Bad">1 star</label>
        </ul>
    </form>
    <form>
        <div class="form-group">
            <label class="comments" for="meeting_comment_textarea">Kommentaarid</label></br>
            <textarea class="form-control" id="meeting_comment_textarea" rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-primary" onclick="submitFeedbackform()">Submit</button>
    </form>
</div>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery-ui.js"></script>
<script>
    $(document).ready(
        function () {
            // initUiControls();
            // Käivitame selle koodi siis, kui HTML dokument lõplikult laetud.
            // $('#companies_list').append('Hello World');
            getMeetingInfo();
            // getMeetingOwnerName();
            // Check Radio-box
            $(".rating input:radio").attr("checked", false);

            $('.rating input').click(function () {
                $(".rating span").removeClass('checked');
                $(this).parent().addClass('checked');
            });

            $('input:radio').change(
                function(){
                    var userRating = this.value;
                    alert(userRating);
                });
        });

    function getMeetingInfo() {
        $.ajax(
            {
                method: "GET",
                url: "/rest/get_meeting_by_id?meeting_id=" + 1,//meetingId - VAHETA ÄRA!!!!!,
                dataType: "json",
                complete: function (response) {
                    var meeting = response.responseJSON;
                    $('#meeting_id_field').html(meeting.meetingId);
                    $('#meeting_holder_id').html(meeting.meetingOwnerId);
                    $('#meeting_subject').html(meeting.subject);
                    $('#meeting_time').html(meeting.dateTimeForMeeting);
                    $('#meeting_holder_by_name').html(meeting.meetingHolder.firstName + ' ' + meeting.meetingHolder.lastName);
                    console.log('Jep, the AJAX method works!')
                }

            }
        );
    }

    function submitFeedbackform()  {
        $.ajax(
            {
                method: "POST",
                url: "/rest/submit_feedback",
                dataType: "json",
                contentType: 'application/json',
                data: JSON.stringify(
                    {
                        meetingId: 123, //('#meeting_id_field').val(),
                        comment: 'FUCKING TEST',//$('#meeting_comment_textarea').val(),
                        feedbackAsNumber: 3, //$('#rating').val(),
                    }
                ),

                complete: function (response) {
                    console.log('Jep, the AJAX method (sumbitFeedbackform) works!');
                    //giveAllUsers();
                }
            }
        )
    }

/*    function getMeetingOwnerName(){
        $.ajax(
            {
                method: "GET",
                url: "/rest/get_user?user_id=" +  23,
                dataType: "json",
                contenType: 'application/json',
                complete: function (response) {
                    var user = response.responseJSON;
                    $('#meeting_holder_by_name').val(user.firstName);
                }

            }
        );

    }*/


</script>

</body>
</html>